<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Reset Flow Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        h2 {
            color: #007bff;
            margin-bottom: 15px;
        }

        p {
            line-height: 1.6;
            color: #555;
        }

        code {
            background-color: #f8f9fa;
            padding: 5px 10px;
            border-radius: 5px;
            display: block;
            margin-bottom: 10px;
        }

        .code-block {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: monospace;
            font-size: 14px;
            color: #333;
        }

        .steps {
            list-style-type: decimal;
            margin: 20px 0;
            padding-left: 20px;
        }

        .steps li {
            margin-bottom: 10px;
        }

        .note {
            background-color: #e7f3fe;
            border-left: 4px solid #2196F3;
            padding: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Password Reset Flow Documentation</h1>

    <h2>Introduction</h2>
    <p>This document explains how to use the <strong>forgotPassword</strong>, <strong>resetPassword</strong>, and <strong>setNewPassword</strong> functions for handling password reset requests in a Node.js application.</p>

    <h2>1. Forgot Password</h2>
    <p>The <strong>forgotPassword</strong> function generates a reset token and sends it to the user's email address. This token is stored securely in the database and expires after 1 hour.</p>
    <div class="code-block">
        <pre>
const forgotPassword = async (req, res) => {
    // Functionality to handle forgot password request
};
        </pre>
    </div>
    <ul class="steps">
        <li>User submits their email address via a form.</li>
        <li>The <code>forgotPassword</code> function checks if the user exists and generates a 4-digit reset token.</li>
        <li>The reset token is hashed and stored in the database, with an expiration time of 1 hour.</li>
        <li>An email is sent to the user containing the reset token.</li>
    </ul>

    <h2>2. Reset Password</h2>
    <p>The <strong>resetPassword</strong> function verifies the reset token provided by the user and ensures it is valid (not expired). If the token is valid, the user is allowed to proceed to the password reset form.</p>
    <div class="code-block">
        <pre>
const resetPassword = async (req, res) => {
    // Functionality to handle token validation
};
        </pre>
    </div>
    <ul class="steps">
        <li>User enters the 4-digit reset token they received via email.</li>
        <li>The <code>resetPassword</code> function checks the token against the one stored in the database.</li>
        <li>If the token is valid and not expired, the user is allowed to proceed to the password reset page.</li>
    </ul>

    <h2>3. Set New Password</h2>
    <p>The <strong>setNewPassword</strong> function allows the user to set a new password once their reset token has been validated. The new password is securely hashed before being stored in the database.</p>
    <div class="code-block">
        <pre>
const setNewPassword = async (req, res) => {
    // Functionality to handle setting a new password
};
        </pre>
    </div>
    <ul class="steps">
        <li>After the token is validated, the user enters their new password.</li>
        <li>The <code>setNewPassword</code> function hashes the new password and updates the user's record in the database.</li>
        <li>The reset token is then cleared from the database, and the user can log in with their new password.</li>
    </ul>

    <div class="note">
        <strong>Note:</strong> Ensure that the password reset functionality is protected against brute-force attacks by implementing rate limiting and other security measures.
    </div>

</div>

</body>
</html>
